# Язык программирования Swift!

## О языке Swift

**Swift** – это новый язык программирования для разработки iOS и OS X приложений, который сочетает в себе все лучшее от C и Objective-C, но лишен ограничений, накладываемых в угоду совместимости с C. В Swift используются паттерны безопасного программирования и добавлены современные функции, превращающие создание приложения в простой, более гибкий и увлекательный процесс.
  
Swift разрабатывался несколько лет. Основой нового языка программирования послужили существующие компилятор, отладчик и фреймворки. Был упрощён процесс управления памятью с помощью механизма автоматического подсчета ссылок – **Automatic Reference Counting (ARC)**. Фреймворки также подверглись серьезной модернизации. Objective-C начал поддерживать блоки, литералы и модули – все это создало благоприятные условия для внедрения современных технологий. Именно эта подготовительная работа послужила фундаментом для нового языка программирования, который применяется для разработки программных продуктов для Apple.  
  
Разработчикам Objective-C Swift покажется знакомым. Он сочетает в себе читабельность именованных параметров и мощь динамической объектной модели Objective-C. Он открывает доступ к уже существующим фреймворкам **Cocoa** и совместим с кодом, написанным на Objective-C. Построенный на этой общей основе язык предлагает множество новых возможностей и унифицирует процедурные и объектно-ориентированные аспекты языка программирования.  
  
Swift не отпугнет и начинающих программистов. Это первый мощный язык программирования, такой же понятный и увлекательный, как скриптовый язык. Он поддерживает так называемые **playground**-ы, которые позволяют программистам экспериментировать с кодом, видя результат в режиме реального времени без необходимости компилировать и запускать приложение.  
  
Swift вобрал в себя все лучшее от современных языков и разработан с учетом обширного опыта компании Apple. Он спроектирован таким образом, чтобы вы смогли легко разработать и ваше первое приложение «hello, world!», и даже целую операционную систему. Все это делает Swift важным инструментом для разработчиков и для самой компании Apple.  
  
Swift – это новый фантастический способ создавать приложения для iOS и OS X. 

## Особенности

Swift включает в себя функции, которые облегчают чтение и запись кода, предоставляя разработчику контроль, необходимый для настоящего языка системного программирования. Swift поддерживает предполагаемые типы, чтобы сделать код более чистым и менее подверженным ошибкам, а модули устраняют заголовки и предоставляют пространства имен. Выделение памяти осуществляется автоматически, и  даже не нужно вводить точки с запятой. Swift также заимствует некоторые детали из других языков, например, именованные параметры, перенесенные из Objective-C, выражены в чистом синтаксисе, который делает API-интерфейсы в Swift простыми для чтения и обслуживания.

Функции Swift предназначены для совместной работы над созданием мощного, но интересного в использовании языка.
Некоторые дополнительные функции Swift включают в себя:
-   Замыкания, объединенные с указателями функций
-   Кортежи и множественные возвращаемые значения
-   «Дженерики»
-   Быстрая и краткая итерация по диапазону или коллекции
-   Структуры, которые поддерживают методы, расширения и протоколы
-   Шаблоны функционального программирования, например map и filter
-   Мощная встроенная обработка ошибок
-   Расширенное управление потоком с ключевыми словами `do`,  `guard`,  `defer`, и  `repeat`.

## Безопасность

С самого начала Swift был спроектирован так, чтобы быть более безопасным, чем языки на основе C, и исключать целые классы небезопасного кода. Переменные всегда инициализируются перед использованием, массивы и целые числа проверяются на переполнение, а память управляется автоматически. Синтаксис настроен так, чтобы вам было легко определить ваше намерение – например, ключевые слова всего из трёх символов определяют переменную (`var`) или константу (`let`).

Еще одна особенность безопасности заключается в том, что по умолчанию объекты Swift никогда не могут быть  `nil`, и пытается сделать или использовать  `nil`  объект приведет к ошибке во время компиляции. Это делает написание кода намного чище и безопаснее, и предотвращает основную причину сбоев во время выполнения. Однако бывают случаи, когда  `nil`  уместен, и для этих ситуаций Swift имеет инновационную функцию, известную как  **optionals**. Необязательный параметр может быть  `nil`, но синтаксис Swift заставляет вас безопасно обращаться с ним, используя  `?`  чтобы указать компилятору, что вы понимаете с чем работаете и продолжите с ним взаимодействовать безопасно.

## Примеры использования языка Swift

### Основы
Пример создания переменной `myVariable` и константы `myConstant`: 
```Swift
var myVariable = 42 
myVariable = 50 
let myConstant = 42
```
Типы константы и переменной должны совпадать с типами присваиваемых им соответствующих значений. Однако это не означает, что вы должны напрямую указывать их тип. Компилятор автоматически определит тип константы и переменной при присваивании им значения. Так, в приведенном примере компилятор определит, что `myVariable` имеет целочисленный тип.  
  
Если же инициализатор отсутствует или не предоставляет достаточной информации, вы можете указать тип самостоятельно после переменной, разделив название и тип двоеточием:
```Swift
let implicitInteger = 70 
let inplicitDouble = 70.0 
let inplicitDouble: Double = 70
```
Значения никогда не конвертируются в другой тип неявно. Если вам необходимо конвертировать значение в другой тип, делайте это явно:
```Swift
let label = "The width is " 
let width = 94 
let widthLabel = label + String(width)
```
Имеется более простой способ включения значений в строки: для этого заключите выражение в скобки и поставьте перед ними обратный слэш (`\`). Пример:
```Swift
let apples = 3 
let oranges = 5 
let appleSummary = "I have \(apples) apples." 
let fruitSummary = "I have \(apples + oranges) pieces of fruit."
```
При работе с массивами и ассоциативными массивами (словарями, dictionary) используются квадратные скобки (`[]`):  
```Swift
var shoppingList = ["catfish", "water", "tulips", "blue paint"]
shoppingList[1] = "bottle of water"
 
var occupations = [
    "Malcolm": "Captain",
    "Kaylee": "Mechanic",
]
occupations["Jayne"] = "Public Relations"
```
Чтобы создать пустой массив или dictionary, используйте следующий синтаксис:  
```Swift
let emptyArray = String[]()
let emptyDictionary = Dictionary<String, Float>()
```
Для создания пустых массивов и словарей используйте `[]` и `[:]` соответственно, – например, когда вы присваиваете новое значение переменной или передаете аргумент в функцию.   
```Swift
shoppingList = []
```
### Условия и циклы

Для создания условий используются операторы `if` и `switch`, для создания циклов – `for-in`, `for`, `while` и `do-while`. При этом выделять круглыми скобками условия и инициализирующие выражения необязательно, тогда как фигурные скобки обязательны.  
```Swift
let individualScores = [75, 43, 103, 87, 12]
var teamScore = 0
for score in individualScores {
    if score > 50 {
        teamScore += 3
    } else {
        teamScore += 1
    }
}
teamScore
```
  
Условие внутри оператора `if` должно быть логическим, это в частности означает, что выражение `if score {…}` является ошибочным, поскольку здесь нет явного сравнения (например, с нулем).  
  
Условный оператор `if` можно использовать совместно с `let` и `var` для работы с константами и переменными, которые могут иметь значение `nil`. Такие константы и переменные называются опциональными (то есть они могут либо принимать какое-либо значение, либо быть равны `nil`). Чтобы создать опциональную переменную или константу добавьте знак вопроса (`?`) после указания типа.  
```Swift
 var optionalString: String? = "Hello"
optionalString == nil
 
var optionalName: String? = "John Appleseed"
var greeting = "Hello!"
if let name = optionalName {
    greeting = "Hello, \(name)"
}
```
  
Если опциональное значение равно `nil`, условие будет ложным и код в фигурных скобках после `if` выполнен не будет. В противном случае переменной `greeting` будет присвоено новое значение.

### Функции и замыкания.

Для объявления функций используйте ключевое слово `func`. Вызов функции производится через указание ее имени и списка аргументов в круглых скобках. Возвращаемый тип следует отделить от перечня формальных аргументов с помощью `->`.  
```Swift
func greet(name: String, day: String) -> String {
    return "Hello \(name), today is \(day)."
}
greet("Bob", "Tuesday")
```

Если функция возвращает множество значений, следует использовать кортеж:  
```Swift
func getGasPrices() -> (Double, Double, Double) {
    return (3.59, 3.69, 3.79)
}
getGasPrices()
```

Функции также могут иметь неопределенное число аргументов:  
```Swift
func sumOf(numbers: Int...) -> Int {
    var sum = 0
    for number in numbers {
        sum += number
    }
    return sum
}
sumOf()
sumOf(42, 597, 12)
```
  
Функции могут вкладываться друг в друга. Вложенная функция может обращаться к переменным, объявленным во внешней функции. Используйте вложенные функции, чтобы привести в порядок код сложной или большой функции.  
```Swift
func returnFifteen() -> Int {
    var y = 10
    func add() {
        y += 5
    }
    add()
    return y
}
returnFifteen()
```
Функции являются объектами первого класса (first-class type), иными словами, функция в качестве своего результата может возвращать другую функцию.  
```Swift
func makeIncrementer() -> (Int -> Int) {
    func addOne(number: Int) -> Int {
        return 1 + number
    }
    return addOne
}
var increment = makeIncrementer()
increment(7)
```
Функция также может принимать другую функцию в качестве одного из аргументов.  
```Swift
func hasAnyMatches(list: Int[], condition: Int -> Bool) -> Bool {
    for item in list {
        if condition(item) {
            return true
        }
    }
    return false
}
func lessThanTen(number: Int) -> Bool {
    return number < 10
}
var numbers = [20, 19, 7, 12]
hasAnyMatches(numbers, lessThanTen)

```

Функции являются частным случаем замыканий. Вы можете создать замыкание, не указывая его имени и окружив тело замыкания фигурными скобками (`{}`). Для отделения аргументов и типа возвращаемого значения от тела замыкания используйте оператор `in`.  
```Swift
numbers.map({
    (number: Int) -> Int in
    let result = 3 * number
    return result
})
```

Существует несколько техник, позволяющих делать замыкания более лаконичными. Если тип замыкания априори известен (например, это callback делегата), можно опустить указание типа его параметров и/или типа возвращаемого значения. Замыкания, состоящие из единственного выражения, неявно возвращают результат этого выражения.  
```Swift
numbers.map({ number in 3 * number })
```
  
В замыкании вместо указания имени переменной, вы можете использовать ее порядковый номер – это особенно полезно при написании коротких замыканий. Замыкание, являющееся последним аргументом функции, может быть передано в нее сразу после круглых скобок с перечнем остальных параметров.  
```Swift
sort([1, 5, 3, 12, 2]) { $0 > $1 }
```


# Итоги

## Плюсы и минусы Swift

**Плюсы:**

1.  Для написания приложения требуется меньше кода, хотя бы просто потому, что здесь реализован упрощенный принцип работы с повторяющимися строками и заявлениями;
    
2.  Удобен для чтения. Стандартное достоинство любого современного языка;
    
3.  Больше возможностей по сравнению с Objective-C, в частности возможность управлять памятью;
    
4.  Полноценное взаимодействие с кодом, написанным на Objective-C;
    
5.  Повышенная безопасность. Это выражается и в обработке указателей, и в дотошности компилятора, и в том, что в саму компиляцию можно встроить опциональную переменную nil для обеспечения обратной связи.
    

**Минусы:**

1.  Из-за молодости языка и не переведённых на Swift кодов OS X и iOS требуется хотя бы минимальное знание Objective-C;
    
2.  Компилятор выдаёт излишние и просто сбивающие с толку ошибки, которые разработчику, пришедшему с других языков покажутся как минимум необычными.


## Swift VS Python


|                |Swift                       |Python                        |
|----------------|-------------------------------|-----------------------------|
|Область применения| ПО для экосистемы Apple|Огромная сфера применения|
|Скорость          |В 8.4 раза быстрее чем Python|Медленный|
|Синтаксис|   		Максимально простой|Максимально простой|
|IDE		|Python IDLE |		Playground|

## Полезные ссылки
[Welcome to Swift.org](https://swift.org)
[Swift. Язык программирования с открытым кодом.](https://www.apple.com/ru/swift/)
[Язык программирования Swift.](https://habr.com/ru/company/apphud/blog/225841/)
